(this["webpackJsonpvisualize-data"]=this["webpackJsonpvisualize-data"]||[]).push([[0],{181:function(e,a,t){e.exports=t(373)},186:function(e,a,t){},187:function(e,a,t){},188:function(e,a,t){e.exports=t.p+"static/media/DAMKBAoDBwoDBAkOBAYFCw.4e48680b.csv"},373:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(13),i=t.n(o),c=(t(186),t(187),t(10)),s=function(){return r.a.createElement("div",{className:"ad-dashboard-info"},r.a.createElement("p",{className:"ad-dashboard-info__text"},"- Select zero to N Datasources"),r.a.createElement("p",{className:"ad-dashboard-info__text"},"- Select zero to N Campaigns"),r.a.createElement("span",{className:"ad-dashboard-info__text -small"},'(where zero means "ALL")'),r.a.createElement("p",{className:"ad-dashboard-info__text"},'Hitting "Apply", filters the chart to show a timeseries for both Clicks and Impressions for given Datasources and Campaigns - logical AND'))};s.displayName="AdDashboardInfoComponent";var l=s,u=t(7),d=t(8),m=new(function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"createItemFromResponse",value:function(e){return{campaign:e.campaign,clicks:+e.clicks,dataSource:e.datasource,date:e.date,impressions:+e.impressions}}}]),e}()),p=t(139),f=t.n(p),h={Date:"date",Datasource:"datasource",Campaign:"campaign",Clicks:"clicks",Impressions:"impressions"},v=new(function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"getData",value:function(){var e=t(188);return new Promise((function(a,t){f.a.parse(e,{download:!0,transformHeader:function(e){return h[e]||""},header:!0,error:function(e){t(e)},complete:function(e){a(e.data)}})}))}}]),e}()),g=new(function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"getData",value:function(){return v.getData().then((function(e){for(var a=[],t=[],n=[],r=0;r<e.length;r++)e[r].date&&(n.push(m.createItemFromResponse(e[r])),-1===t.indexOf(n[r].dataSource)&&t.push(n[r].dataSource),-1===a.indexOf(n[r].campaign)&&a.push(n[r].campaign));return{items:n,campaigns:a,dataSources:t}}))}},{key:"getDisplayData",value:function(e,a,t){return this.groupDataByDate(e.filter((function(e){return(!t||e.campaign===t)&&-1!==a.indexOf(e.dataSource)})))}},{key:"groupDataByDate",value:function(e){for(var a,t=[],n=0,r=0,o=(null===(a=e[0])||void 0===a?void 0:a.date)||"",i=0,c=0;c<e.length;c++){var s;if(n+=e[c].clicks,r+=e[c].impressions,i++,c===e.length-1||e[c+1].date!==o)if(t.push({date:o,clicks:Math.round(n/i),impressions:Math.round(r/i),dataSource:"",campaign:""}),e[c+1])n=0,r=0,o=(null===(s=e[c+1])||void 0===s?void 0:s.date)||"",i=0}return t}}]),e}()),b=t(14),E=function(e){if(!e.data.length)return null;return r.a.createElement("div",null,r.a.createElement(b.e,{height:300},r.a.createElement(b.d,{data:e.data,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(b.a,{strokeDasharray:"3 3"}),r.a.createElement(b.h,{yAxisId:0,scale:"sequential",dataKey:"clicks",stroke:"#3480eb"}),r.a.createElement(b.h,{yAxisId:1,dataKey:"impressions",orientation:"right",stroke:"#012252"}),r.a.createElement(b.g,{dataKey:"date"}),r.a.createElement(b.f,null),r.a.createElement(b.b,null),r.a.createElement(b.c,{dataKey:"clicks",yAxisId:0,stroke:"#3480eb"}),r.a.createElement(b.c,{dataKey:"impressions",yAxisId:1,stroke:"#012252"}))))};E.displayName="AdDashboardChartComponent";var D=E,C=t(56),y=function(e){return r.a.createElement(C.a,{value:e.value.map((function(e){return{label:e,value:e}})),options:e.options.map((function(e){return{value:e,label:e}})),isMulti:!0,onChange:function(a){var t;e.onChange((null===(t=a)||void 0===t?void 0:t.map((function(e){return e.value})))||[])}})};y.displayName="MultiSelectComponent";var k=y,S=function(e){return r.a.createElement("div",null,r.a.createElement(C.a,{value:{value:e.value,label:e.value},options:e.options.map((function(e){return{value:e,label:e}})),isMulti:!1,onChange:function(a){e.onChange((null===a||void 0===a?void 0:a.value)||"")},isClearable:!0}))};S.displayName="SingleSelectComponent";var O=S,N=function(e){return r.a.createElement("div",null,r.a.createElement("p",null,"Filter dimension values"),r.a.createElement("p",null,"Datasource"),r.a.createElement(k,{onChange:e.onDataSourceChange,value:e.selectedDataSources,options:e.dataSourceOptions}),r.a.createElement("p",null,"Campaign"),r.a.createElement(O,{onChange:e.onCampaignChange,value:e.selectedCampaign,options:e.campaignOptions}))};N.displayName="AdDashboardFiltersComponent";var _=N,w=function(){var e=Object(n.useState)({campaigns:[],dataSources:[],items:[]}),a=Object(c.a)(e,2),t=a[0],o=a[1],i=Object(n.useState)([]),s=Object(c.a)(i,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(c.a)(m,2),f=p[0],h=p[1],v=Object(n.useMemo)((function(){return g.getDisplayData(t.items,u,f)}),[t,f,u]);return Object(n.useEffect)((function(){g.getData().then((function(e){o(e)}))}),[]),Object(n.useEffect)((function(){d(t.dataSources)}),[t.dataSources]),r.a.createElement("div",{className:"ad-dashboard"},r.a.createElement("div",{className:"ad-dashboard__info"},r.a.createElement(l,null)),r.a.createElement("div",{className:"ad-dashboard__main"},r.a.createElement("div",{className:"ad-dashboard__filters"},r.a.createElement(_,{campaignOptions:t.campaigns,selectedCampaign:f,onCampaignChange:h,dataSourceOptions:t.dataSources,selectedDataSources:u,onDataSourceChange:d})),r.a.createElement("div",{className:"ad-dashboard__chart"},r.a.createElement(D,{data:v}))))};w.displayName="AdDashboardComponent";var j=w,A=function(){return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__container"},r.a.createElement(j,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[181,1,2]]]);
//# sourceMappingURL=main.5146e129.chunk.js.map